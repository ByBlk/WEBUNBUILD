export default function textToStyled(text: string): JSX.Element[] {
    const colorMap: { [key: string]: string } = {
        '~r~': '#D93939',
        '~g~': '#39D966',
        '~b~': 'blue',
        '~y~': 'rgba(251, 184, 4)',
        '~p~': 'purple',
        '~c~': 'cyan',
        '~m~': 'brown',
        '~u~': 'black',
        '~o~': 'orange',
        '~w~': 'white',
        '~HUD_COLOUR_PURE_WHITE~': 'rgb(255, 255, 255)',
        '~HUD_COLOUR_WHITE~': 'rgb(240, 240, 240)',
        '~HUD_COLOUR_BLACK~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_GREY~': 'rgb(155, 155, 155)',
        '~HUD_COLOUR_GREYLIGHT~': 'rgb(205, 205, 205)',
        '~HUD_COLOUR_GREYDARK~': 'rgb(77, 77, 77)',
        '~HUD_COLOUR_RED~': 'rgb(224, 50, 50)',
        '~HUD_COLOUR_REDLIGHT~': 'rgb(240, 153, 153)',
        '~HUD_COLOUR_REDDARK~': 'rgb(112, 25, 25)',
        '~HUD_COLOUR_BLUE~': 'rgb(93, 182, 229)',
        '~HUD_COLOUR_BLUELIGHT~': 'rgb(174, 219, 242)',
        '~HUD_COLOUR_BLUEDARK~': 'rgb(47, 92, 115)',
        '~HUD_COLOUR_YELLOW~': 'rgb(240, 200, 80)',
        '~HUD_COLOUR_YELLOWLIGHT~': 'rgb(254, 235, 169)',
        '~HUD_COLOUR_YELLOWDARK~': 'rgb(126, 107, 41)',
        '~HUD_COLOUR_ORANGE~': 'rgb(255, 133, 85)',
        '~HUD_COLOUR_ORANGELIGHT~': 'rgb(255, 194, 170)',
        '~HUD_COLOUR_ORANGEDARK~': 'rgb(127, 66, 42)',
        '~HUD_COLOUR_GREEN~': 'rgb(114, 204, 114)',
        '~HUD_COLOUR_GREENLIGHT~': 'rgb(185, 230, 185)',
        '~HUD_COLOUR_GREENDARK~': 'rgb(57, 102, 57)',
        '~HUD_COLOUR_PURPLE~': 'rgb(132, 102, 226)',
        '~HUD_COLOUR_PURPLELIGHT~': 'rgb(192, 179, 239)',
        '~HUD_COLOUR_PURPLEDARK~': 'rgb(67, 57, 111)',
        '~HUD_COLOUR_PINK~': 'rgb(203, 54, 148)',
        '~HUD_COLOUR_RADAR_HEALTH~': 'rgb(53, 154, 71)',
        '~HUD_COLOUR_RADAR_ARMOUR~': 'rgb(93, 182, 229)',
        '~HUD_COLOUR_RADAR_DAMAGE~': 'rgb(235, 36, 39)',
        '~HUD_COLOUR_NET_PLAYER1~': 'rgb(194, 80, 80)',
        '~HUD_COLOUR_NET_PLAYER2~': 'rgb(156, 110, 175)',
        '~HUD_COLOUR_NET_PLAYER3~': 'rgb(255, 123, 196)',
        '~HUD_COLOUR_NET_PLAYER4~': 'rgb(247, 159, 123)',
        '~HUD_COLOUR_NET_PLAYER5~': 'rgb(178, 144, 132)',
        '~HUD_COLOUR_NET_PLAYER6~': 'rgb(141, 206, 167)',
        '~HUD_COLOUR_NET_PLAYER7~': 'rgb(113, 169, 175)',
        '~HUD_COLOUR_NET_PLAYER8~': 'rgb(211, 209, 231)',
        '~HUD_COLOUR_NET_PLAYER9~': 'rgb(144, 127, 153)',
        '~HUD_COLOUR_NET_PLAYER10~': 'rgb(106, 196, 191)',
        '~HUD_COLOUR_NET_PLAYER11~': 'rgb(214, 196, 153)',
        '~HUD_COLOUR_NET_PLAYER12~': 'rgb(234, 142, 80)',
        '~HUD_COLOUR_NET_PLAYER13~': 'rgb(152, 203, 234)',
        '~HUD_COLOUR_NET_PLAYER14~': 'rgb(178, 98, 135)',
        '~HUD_COLOUR_NET_PLAYER15~': 'rgb(144, 142, 122)',
        '~HUD_COLOUR_NET_PLAYER16~': 'rgb(166, 117, 94)',
        '~HUD_COLOUR_NET_PLAYER17~': 'rgb(175, 168, 168)',
        '~HUD_COLOUR_NET_PLAYER18~': 'rgb(232, 142, 155)',
        '~HUD_COLOUR_NET_PLAYER19~': 'rgb(187, 214, 91)',
        '~HUD_COLOUR_NET_PLAYER20~': 'rgb(12, 123, 86)',
        '~HUD_COLOUR_NET_PLAYER21~': 'rgb(123, 196, 255)',
        '~HUD_COLOUR_NET_PLAYER22~': 'rgb(171, 60, 230)',
        '~HUD_COLOUR_NET_PLAYER23~': 'rgb(206, 169, 13)',
        '~HUD_COLOUR_NET_PLAYER24~': 'rgb(71, 99, 173)',
        '~HUD_COLOUR_NET_PLAYER25~': 'rgb(42, 166, 185)',
        '~HUD_COLOUR_NET_PLAYER26~': 'rgb(186, 157, 125)',
        '~HUD_COLOUR_NET_PLAYER27~': 'rgb(201, 225, 255)',
        '~HUD_COLOUR_NET_PLAYER28~': 'rgb(240, 240, 150)',
        '~HUD_COLOUR_NET_PLAYER29~': 'rgb(237, 140, 161)',
        '~HUD_COLOUR_NET_PLAYER30~': 'rgb(249, 138, 138)',
        '~HUD_COLOUR_NET_PLAYER31~': 'rgb(252, 239, 166)',
        '~HUD_COLOUR_SIMPLEBLIP_DEFAULT~': 'rgb(159, 201, 166)',
        '~HUD_COLOUR_MENU_BLUE_EXTRA_DARK~': 'rgb(40, 40, 40)',
        '~HUD_COLOUR_MENU_YELLOW~': 'rgb(240, 160, 0)',
        '~HUD_COLOUR_MENU_YELLOW_DARK~': 'rgb(240, 160, 0)',
        '~HUD_COLOUR_MENU_GREEN~': 'rgb(240, 160, 0)',
        '~HUD_COLOUR_MENU_GREY_DARK~': 'rgb(60, 60, 60)',
        '~HUD_COLOUR_MENU_HIGHLIGHT~': 'rgb(30, 30, 30)',
        '~HUD_COLOUR_MENU_DIMMED~': 'rgb(75, 75, 75)',
        '~HUD_COLOUR_MENU_EXTRA_DIMMED~': 'rgb(50, 50, 50)',
        '~HUD_COLOUR_BRIEF_TITLE~': 'rgb(95, 95, 95)',
        '~HUD_COLOUR_MID_GREY_MP~': 'rgb(100, 100, 100)',
        '~HUD_COLOUR_NET_PLAYER1_DARK~': 'rgb(93, 39, 39)',
        '~HUD_COLOUR_NET_PLAYER2_DARK~': 'rgb(77, 55, 89)',
        '~HUD_COLOUR_NET_PLAYER3_DARK~': 'rgb(124, 62, 99)',
        '~HUD_COLOUR_NET_PLAYER4_DARK~': 'rgb(120, 80, 80)',
        '~HUD_COLOUR_NET_PLAYER5_DARK~': 'rgb(87, 72, 66)',
        '~HUD_COLOUR_NET_PLAYER6_DARK~': 'rgb(74, 103, 83)',
        '~HUD_COLOUR_NET_PLAYER7_DARK~': 'rgb(60, 85, 88)',
        '~HUD_COLOUR_NET_PLAYER8_DARK~': 'rgb(105, 105, 64)',
        '~HUD_COLOUR_NET_PLAYER9_DARK~': 'rgb(72, 63, 76)',
        '~HUD_COLOUR_NET_PLAYER10_DARK~': 'rgb(53, 98, 95)',
        '~HUD_COLOUR_NET_PLAYER11_DARK~': 'rgb(107, 98, 76)',
        '~HUD_COLOUR_NET_PLAYER12_DARK~': 'rgb(117, 71, 40)',
        '~HUD_COLOUR_NET_PLAYER13_DARK~': 'rgb(76, 101, 117)',
        '~HUD_COLOUR_NET_PLAYER14_DARK~': 'rgb(65, 35, 47)',
        '~HUD_COLOUR_NET_PLAYER15_DARK~': 'rgb(72, 71, 61)',
        '~HUD_COLOUR_NET_PLAYER16_DARK~': 'rgb(85, 58, 47)',
        '~HUD_COLOUR_NET_PLAYER17_DARK~': 'rgb(87, 84, 84)',
        '~HUD_COLOUR_NET_PLAYER18_DARK~': 'rgb(116, 71, 77)',
        '~HUD_COLOUR_NET_PLAYER19_DARK~': 'rgb(93, 107, 45)',
        '~HUD_COLOUR_NET_PLAYER20_DARK~': 'rgb(6, 61, 43)',
        '~HUD_COLOUR_NET_PLAYER21_DARK~': 'rgb(61, 98, 127)',
        '~HUD_COLOUR_NET_PLAYER22_DARK~': 'rgb(85, 30, 115)',
        '~HUD_COLOUR_NET_PLAYER23_DARK~': 'rgb(103, 84, 6)',
        '~HUD_COLOUR_NET_PLAYER24_DARK~': 'rgb(35, 49, 86)',
        '~HUD_COLOUR_NET_PLAYER25_DARK~': 'rgb(21, 83, 92)',
        '~HUD_COLOUR_NET_PLAYER26_DARK~': 'rgb(93, 98, 62)',
        '~HUD_COLOUR_NET_PLAYER27_DARK~': 'rgb(100, 112, 127)',
        '~HUD_COLOUR_NET_PLAYER28_DARK~': 'rgb(120, 120, 75)',
        '~HUD_COLOUR_NET_PLAYER29_DARK~': 'rgb(152, 76, 93)',
        '~HUD_COLOUR_NET_PLAYER30_DARK~': 'rgb(124, 69, 69)',
        '~HUD_COLOUR_NET_PLAYER31_DARK~': 'rgb(10, 43, 50)',
        '~HUD_COLOUR_NET_PLAYER32_DARK~': 'rgb(95, 95, 10)',
        '~HUD_COLOUR_BRONZE~': 'rgb(180, 130, 97)',
        '~HUD_COLOUR_SILVER~': 'rgb(150, 153, 161)',
        '~HUD_COLOUR_GOLD~': 'rgb(214, 181, 99)',
        '~HUD_COLOUR_PLATINUM~': 'rgb(166, 221, 190)',
        '~HUD_COLOUR_GANG1~': 'rgb(29, 100, 153)',
        '~HUD_COLOUR_GANG2~': 'rgb(214, 116, 15)',
        '~HUD_COLOUR_GANG3~': 'rgb(135, 125, 142)',
        '~HUD_COLOUR_GANG4~': 'rgb(229, 119, 185)',
        '~HUD_COLOUR_SAME_CREW~': 'rgb(252, 239, 166)',
        '~HUD_COLOUR_FREEMODE~': 'rgb(45, 110, 185)',
        '~HUD_COLOUR_PAUSE_BG~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_FRIENDLY~': 'rgb(93, 182, 229)',
        '~HUD_COLOUR_ENEMY~': 'rgb(194, 80, 80)',
        '~HUD_COLOUR_FREEMODE_DARK~': 'rgb(22, 55, 92)',
        '~HUD_COLOUR_INACTIVE_MISSION~': 'rgb(154, 154, 154)',
        '~HUD_COLOUR_DAMAGE~': 'rgb(194, 80, 80)',
        '~HUD_COLOUR_PINKLIGHT~': 'rgb(252, 115, 201)',
        '~HUD_COLOUR_PM_MITEM_HIGHLIGHT~': 'rgb(252, 177, 49)',
        '~HUD_COLOUR_SCRIPT_VARIABLE~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_YOGA~': 'rgb(109, 247, 204)',
        '~HUD_COLOUR_TENNIS~': 'rgb(241, 101, 34)',
        '~HUD_COLOUR_GOLF~': 'rgb(214, 189, 97)',
        '~HUD_COLOUR_SOCIAL_CLUB~': 'rgb(234, 153, 28)',
        '~HUD_COLOUR_PLATFORM_BLUE~': 'rgb(11, 55, 123)',
        '~HUD_COLOUR_PLATFORM_GREEN~': 'rgb(146, 200, 62)',
        '~HUD_COLOUR_PLATFORM_GREY~': 'rgb(234, 153, 28)',
        '~HUD_COLOUR_FACEBOOK_BLUE~': 'rgb(66, 89, 148)',
        '~HUD_COLOUR_INGAME_BG~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_WAYPOINT~': 'rgb(164, 76, 242)',
        '~HUD_COLOUR_MICHAEL~': 'rgb(101, 180, 212)',
        '~HUD_COLOUR_FRANKLIN~': 'rgb(171, 237, 171)',
        '~HUD_COLOUR_TREVOR~': 'rgb(255, 163, 87)',
        '~HUD_COLOUR_GOLF_P2~': 'rgb(235, 239, 30)',
        '~HUD_COLOUR_GOLF_P3~': 'rgb(255, 149, 14)',
        '~HUD_COLOUR_GOLF_P4~': 'rgb(246, 60, 161)',
        '~HUD_COLOUR_WAYPOINTLIGHT~': 'rgb(210, 166, 249)',
        '~HUD_COLOUR_WAYPOINTDARK~': 'rgb(82, 38, 121)',
        '~HUD_COLOUR_PANEL_LIGHT~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_MICHAEL_DARK~': 'rgb(72, 103, 116)',
        '~HUD_COLOUR_FRANKLIN_DARK~': 'rgb(85, 118, 85)',
        '~HUD_COLOUR_TREVOR_DARK~': 'rgb(127, 81, 43)',
        '~HUD_COLOUR_PAUSEMAP_TINT~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_PAUSE_DESELECT~': 'rgb(100, 100, 100)',
        '~HUD_COLOUR_PM_WEAPONS_LOCKED~': 'rgb(240, 240, 240)',
        '~HUD_COLOUR_PAUSEMAP_TINT_HALF~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_NORTH_BLUE_OFFICIAL~': 'rgb(0, 71, 133)',
        '~HUD_COLOUR_SCRIPT_VARIABLE_2~': 'rgb(0, 0, 0)',
        '~HUD_COLOUR_H~': 'rgb(33, 118, 37)',
        '~HUD_COLOUR_HDARK~': 'rgb(37, 102, 40)',
        '~HUD_COLOUR_T~': 'rgb(234, 153, 28)',
        '~HUD_COLOUR_TDARK~': 'rgb(225, 140, 8)',
        '~HUD_COLOUR_HSHARD~': 'rgb(20, 40, 0)',
        '~HUD_COLOUR_CONTROLLER_MICHAEL~': 'rgb(48, 255, 255)',
        '~HUD_COLOUR_CONTROLLER_FRANKLIN~': 'rgb(48, 255, 0)',
        '~HUD_COLOUR_CONTROLLER_TREVOR~': 'rgb(176, 80, 0)',
        '~HUD_COLOUR_CONTROLLER_CHOP~': 'rgb(127, 0, 0)',
        '~HUD_COLOUR_VIDEO_EDITOR_VIDEO~': 'rgb(53, 166, 224)',
        '~HUD_COLOUR_VIDEO_EDITOR_AUDIO~': 'rgb(162, 79, 157)',
        '~HUD_COLOUR_VIDEO_EDITOR_TEXT~': 'rgb(104, 192, 141)',
        '~HUD_COLOUR_HB_BLUE~': 'rgb(29, 100, 153)',
        '~HUD_COLOUR_HB_YELLOW~': 'rgb(234, 153, 28)',
        '~HUD_COLOUR_VIDEO_EDITOR_SCORE~': 'rgb(240, 160, 1)',
        '~HUD_COLOUR_VIDEO_EDITOR_AUDIO_FADEOUT~': 'rgb(59, 34, 57)',
        '~HUD_COLOUR_VIDEO_EDITOR_TEXT_FADEOUT~': 'rgb(41, 68, 53)',
        '~HUD_COLOUR_VIDEO_EDITOR_SCORE_FADEOUT~': 'rgb(82, 58, 10)',
        '~HUD_COLOUR_HEIST_BACKGROUND~': 'rgb(37, 102, 40)',
        '~HUD_COLOUR_VIDEO_EDITOR_AMBIENT_FADEOUT~': 'rgb(80, 70, 34)',
        '~HUD_COLOUR_G1~': 'rgb(247, 159, 123)',
        '~HUD_COLOUR_G2~': 'rgb(226, 134, 187)',
        '~HUD_COLOUR_G3~': 'rgb(239, 238, 151)',
        '~HUD_COLOUR_G4~': 'rgb(113, 169, 175)',
        '~HUD_COLOUR_G5~': 'rgb(160, 140, 193)',
        '~HUD_COLOUR_G6~': 'rgb(141, 206, 167)',
        '~HUD_COLOUR_G7~': 'rgb(181, 214, 234)',
        '~HUD_COLOUR_G8~': 'rgb(178, 144, 132)',
        '~HUD_COLOUR_G9~': 'rgb(0, 132, 114)',
        '~HUD_COLOUR_G10~': 'rgb(216, 85, 117)',
        '~HUD_COLOUR_G11~': 'rgb(30, 100, 152)',
        '~HUD_COLOUR_G12~': 'rgb(43, 181, 117)',
        '~HUD_COLOUR_G13~': 'rgb(233, 141, 79)',
        '~HUD_COLOUR_G14~': 'rgb(137, 210, 215)',
        '~HUD_COLOUR_G15~': 'rgb(134, 125, 141)',
        '~HUD_COLOUR_ADVERSARY~': 'rgb(109, 34, 33)',
        '~HUD_COLOUR_DEGEN_RED~': 'rgb(255, 0, 0)',
        '~HUD_COLOUR_DEGEN_YELLOW~': 'rgb(255, 255, 0)',
        '~HUD_COLOUR_DEGEN_GREEN~': 'rgb(0, 255, 0)',
        '~HUD_COLOUR_DEGEN_CYAN~': 'rgb(0, 255, 255)',
        '~HUD_COLOUR_DEGEN_BLUE~': 'rgb(0, 0, 255)',
        '~HUD_COLOUR_DEGEN_MAGENTA~': 'rgb(255, 0, 255)',
        '~HUD_COLOUR_STUNT_1~': 'rgb(38, 136, 234)',
        '~HUD_COLOUR_SPECIAL_RACE_SERIES~': 'rgb(154, 178, 54)',
        '~HUD_COLOUR_SPECIAL_RACE_SERIES_DARK~': 'rgb(93, 107, 45)',
        '~HUD_COLOUR_CS~': 'rgb(206, 169, 13)',
        '~HUD_COLOUR_CS_DARK~': 'rgb(103, 84, 6)',
        '~HUD_COLOUR_TECH_GREEN~': 'rgb(0, 151, 151)',
        '~HUD_COLOUR_TECH_GREEN_DARK~': 'rgb(5, 119, 113)',
        '~HUD_COLOUR_TECH_RED~': 'rgb(151, 0, 0)',
        '~HUD_COLOUR_TECH_GREEN_VERY_DARK~': 'rgb(0, 40, 40)',
        '~HUD_COLOUR_JUNK_ENERGY~': 'rgb(29, 237, 195)'
    };

    const regex = /(~[a-zA-Z_0-9]+~)(.*?)(?=~[a-zA-Z_0-9]+~|$)/g;
    const parts: JSX.Element[] = [];
    let lastIndex = 0;
    let match: RegExpExecArray | null;
    
    while ((match = regex.exec(text)) !== null) {
        const color = colorMap[match[1]];
        const content = match[2];
        if (match.index > lastIndex) {
            parts.push(
                <span key={`plain-${lastIndex}`}>
                    {text.slice(lastIndex, match.index)}
                </span>
            );
        }
        parts.push(
            <span style={{ color }} key={`styled-${parts.length}`}>
                {content}
            </span>
        );
        lastIndex = regex.lastIndex;
    }

    if (lastIndex < text.length) {
        parts.push(
            <span key={`plain-${lastIndex}`}>
                {text.slice(lastIndex)}
            </span>
        );
    }

    return parts;
}
